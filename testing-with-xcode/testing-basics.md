# Testing Basics

테스트는 앱과 라이브러리 코드를 연습하고 일련의 예측과 비교하여 통과 또는 실패 결과를 가져오는 코드이다. 테스트는 일부 작업을 수행한 후 객체의 인스턴스 \(instance\) 변수의 상태를 확인하고, 경계 조건에 따라 코드가 특정 예외를 발생시키는지 등을 확인할 수 있다. 성능 측정 테스트의 경우, 참조 표준은 한 세트의 루틴이 완료될 것으로 예상하는 최대 시간일 수 있다.

### 테스트 범위 정의

모든 소프트웨어는 구성을 사용하여 제작된다. 즉, 프로젝트의 목표와 요구사항이 충족될 때까지 더 큰 기능을 가진 더 높은 수준의 구성요소를 구성하기 위해 더 작은 구성요소는 함께 나열된다. 좋은 테스트 관행은 이 구성의 모든 수준에서 기능을 다루는 테스트를 하는 것이다. XCTest를 사용하면 어떤 수준에서든 구성요소에 대한 테스트를 작성할 수 있다.

테스트를 위한 구성요소를 구성하는 것은 당신에게 달려있다. - 그것은 중요한 목적을 달성하는 클래스나 일련의 메서드일 수 있다. 예를 들어, [Quick Start](https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/testing_with_xcode/chapters/02-quick_start.html#//apple_ref/doc/uid/TP40014132-CH2-SW1) 장의 예로서 사용된 계산기 앱에서와 같이 산술 연산이 될 수 있다. 그것은 [UITableView](https://developer.apple.com/documentation/uikit/uitableview)의 콘텐츠와 코드의 데이터 구조체에서 유지되는 이름 목록 사이의 상호작용을 다루는 다른 메서드일 수 있다. 이러한 메서드 및 운영은 각각 앱 기능 구성 요소와 이를 점검하기 위한 테스트를 의미한다. 테스트를 위한 구성 요소의 동작은 완전히 결정론적이어야 한다. 테스트는 통과하거나 실패한다.

앱의 동작을 구성 요소로 나눌 수 있을수록 프로젝트가 성장하고 변화함에 따라 코드의 동작이 모든 세부사항에서 기준 표준을 충족하는지 더 효과적으로 테스트할 수 있다. 구성요소가 많은 대형 프로젝트의 경우, 프로젝트를 철저히 테스트하기 위해 많은 테스트를 실행해야 할 것이다. 테스트는 가능하면 빨리 실행되도록 설계되어야 하지만, 어떤 테스트는 반드시 크고 더 느리게 실행되어야 한다. 소규모의 빠른 실행 테스트는 자주 실행될 수 있으며 문제를 쉽게 진단하고 해결할 수 있도록 고장이 있을 때 사용할 수 있다.

프로젝트의 구성요소를 위해 설계된 테스트는 테스트 주도형 개발의 기초가 되며, 테스트할 코드를 작성하기 전에 테스트 로직을 작성하는 방식의 쓰기 코드이다. 이 개발 접근법을 사용하면 코드를 구현하기 전에 코드에 대한 요구 사항과 엣지 케이스를 코드화할 수 있다. 테스트를 작성한 후 테스트를 통과하기 위해 알고리즘을 개발한다. 코드가 테스트를 통과한 후에는 다음 번에 테스트를 실행할 때 예상 동작 \(제품에 버그가 발생할 수 있음\)에 대한 모든 변경 사항이 식별된다는 확신을 가지고 코드를 개선할 수 있는 기반을 갖게 된다.

테스트 주도 개발을 사용하지 않을 때에도 테스트는 기능 및 함수를 향상시키기 위해 수정할 때 코드에 버그가 유입되는 것을 줄이는 데 도움이 될 수 있다. 사용자는 향후 변경 사항이 계획된 방식이외의 앱의 기존 동작을 수정하지 않도록 하기 위해 작동 중인 앱에 테스트를 통합한다. 버그를 수정할 때 버그가 고정되어 있는지 확인하는 테스트를 추가한다. 테스트는 모든 경계 조건을 다루기 위해 예상된 성공과 예상되는 실패를 모두 찾아 코드를 연습해야 한다.

> **참고:** 테스트를 염두에 두고 설계되지 않은 프로젝트에 테스트를 추가하려면 코드의 부분을 재설계하거나 다시 조작해야 할 수 있다. [Appendix A: Writing Testable Code](https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/testing_with_xcode/chapters/A1-guidelines_writing_testable_code.html#//apple_ref/doc/uid/TP40014132-CH8-SW1)에는 유용하다고 생각되는 테스트 가능한 코드를 작성하기 위한 간단한 지침이 포함되어 있다.

구성요소는 앱에 다양한 부분 사이의 상호작용을 포함할 수 있다. 어떤 유형의 테스트는 실행하는데 훨씬 더 오랜 시간이 걸리기 때문에 주기적으로 또는 서버에서만 테스트를 실행할 수 있다. 다음장에서 볼 수 있듯이, 다른 필요를 충족시키기 위해 테스트를 조작하고 여러 가지 다른 방법으로 실행할 수 있다.

### 성능 테스트

구성요소의 테스트는 본질적으로 함수가 될 수 있고 성능을 측정할 수도 있다. XCTest는 시간 기능 성능을 측정하는 API를 제공하여 기능 개선 및 회귀 분석과 유사한 방법으로 성능 개선 및 회귀 분석을 추적할 수 있다.

성능을 측정할 때 성공 또는 실패 결과를 제공하려면, 테스트에는 그에 대한 평가 _baseline_이 있어야 한다. 기준선은 테스트 메서드의 각 주행의 표준 편차 측정값과 조합한 것이다. 기준 이하로 떨어지거나 실행까지 너무 많은 차이가 있는 테스트는 실패로 보고된다.

> **참고:** 성능 측정 테스트를 처음 실행할 때 기준선을 알 수 없으므로 항상 XCTest에서 오류를 보고한다. 일단 당신이 어떤 측정을 기준으로 받아들이면, XCTest는 당신에게 성공 또는 실패를 평가하고 보고하며, 당신에게 테스트 결과를 자세히 볼 수 있는 수단을 제공한다.

### 유저 인터페이스 테스트

지금까지 논의된 기능 및 성능 테스트는 일반적으로 단위 테스트라고 하는데, 여기서 "단위"는 세분화 및 수준과 관련하여 결정한 기능의 구성요소다. 유닛 테스팅은 주로 예상대로 다른 구성 요소와 상호 작용하는 양호한 구성 요소를 형성하는 것과 관련이 있다. 설계 관점에서 유닛 테스트는 내부로부터 개발 프로젝트에 접근하여 구성 요소가 사용자의 의도를 충족하는지 확인한다.

사용자는 사용자 인터페이스를 통해 이러한 코드 내부와 상호 작용한다. 사용자 인터페이스 상호 작용은 일반적으로 엄격하고 높은 수준의 동작으로, 외부 활동을 수행하고 앱의 함수를 호출하기 위한 여러 구성 요소 \(하위 시스템\)의 동작을 통합한다. 앱 컨텍스트 외부에서 UI를 작동하도록 설계된 특수 설비 없이 사용자가 사용자 인터페이스를 통해 경험하는 상호작용을 연습하기 위한 단위 테스트를 작성하는 것은 어렵다. 이러한 특수 시설로 작성된 테스트를 "UI 테스트"라고 한다.

UI 테스트는 사용자가 경험하는 것처럼 외부 표면에서 접근하는 앱을 테스트한다. 이 도구를 사용하면 시뮬레이션된 이벤트를 시스템 제공 및 사용자 정의 UI 객체 모두에 보내고, 이러한 객체의 응답을 캡처한 다음, 내부 지향적인 유닛 테스트에서와 같은 정확성 또는 성능을 테스트할 수 있다.

### 앱 및 라이브러리 테스트

Xcode는 두 가지 유형의 유닛 테스트 컨텍스트를 제공한다: 앱 테스트와 라이브러리 테스트.

* **앱 테스트.** 앱 테스트는 계산기 앱의 산술 연산 동작과 같이 앱에서 코드의 올바른 동작을 점검한다.
* **라이브러리 테스트.** 라이브러리 테스트는 앱의 런타임에 사용과 무관하게 동적 라이브러리와 프레임워크에서 코드의 올바른 동작을 점검한다. 라이브러리 테스트를 통해 당신은 라이브러리의 구성 요소를 연습하는 단위 테스트를 구성한다.

이러한 테스트 컨텍스트를 적절하게 사용하여 프로젝트를 테스트하는 것은 시간이 지남에 따라 코드가 진화함에 따라 예상 및 예상 동작을 유지하는 데 도움이 된다.

### XCTest—Xcode 테스트 프레임워크

XCTest는 Xcode 5부터 시작하여 사용자의 사용을 위해 제공되는 테스트 프레임워크이다.

버전 및 호환성 관련하여:

* Xcode 5에서 XCTest는 OS X v10.8 및 OS X v10.9에서 실행되고 iOS 7 이상에서 실행되는 것과 호환된다.
* Xcode 6에서 XCTest는 OS X v10.8 및 OS X v10.10에서 실행되고 iOS 6 이상에서 실행되는 것과 호환된다.
* Xcode 7에서 XCTest는 OS X v10.10 및 OS X v10.11에서 실행되고 iOS 6 이상에서 실행되는 것과 호환된다.

UI 테스트는 시뮬레이터와 기기에서 모두 OS X v10.11과 iOS 9에서 실행되도록 지원된다.

버전 호환성에 대한 자세한 내용은 [_Xcode Release Notes_](https://developer.apple.com/library/archive/releasenotes/DeveloperTools/RN-Xcode/Chapters/Introduction.html#//apple_ref/doc/uid/TP40001051)를 참조하라.

Xcode는 XCTest.framework를 프로젝트에 통합한다. 이 프레임워크는 테스트를 설계하고 코드로 실행할 수 있는 API를 제공한다. XCTest 프레임워크에 대한 자세한 내용은 [XCTest Framework Reference](https://developer.apple.com/reference/xctest)를 참조하라.

> 참고: OCUnit을 XCTest로 마이그레이션하는 방법에 대한 자세한 내용은 [Appendix B: Transitioning from OCUnit to XCTest](https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/testing_with_xcode/chapters/A2-transitioning_ocunit_to_xctest.html#//apple_ref/doc/uid/TP40014132-CH10-SW1)을 참조하라.

### 테스트 할 때 시작할 곳

테스트를 만들기 시작하면 다음 아이디어를 염두에 둬라:

* 단위 테스트를 생성할 때는 코드의 가장 기본적인 기초, 즉 컨트롤러와 상호 작용하는 모델 클래스 및 메서드를 테스트하는 데 초점을 맞춰라. 사용자의 앱의 고급 블록 다이어그램에 모델, 뷰 및 컨트롤러 클래스가 있을 가능성이 가장 높은 경우—Cocoa, Cocoa Touch와 함께 작업해 온 모든 사람들에게 친숙한 디자인 패턴이다. 모든 모델 클래스에 대한 테스트를 작성하는 동안, 컨트롤러 클래스에 대한 테스트를 작성하기 전에 앱의 베이스가 잘 테스트되고 있음을 확실히 알 수 있을 것이다. 예를 들어, 웹 서비스 뒤에 연결된 데이터베이스와 같은 앱의 다른 복잡한 부분에 접촉하기 시작한다.  대체 출발점으로, 프레임워크나 라이브러리를 승인하는 경우, API의 표면부터 시작하는 것이 좋을 수 있다. 거기서부터, 당신은 internal 클래스까지 작업할 수 있다.
* UI 테스트를 생성할 때는 가장 일반적인 워크플로우를 고려해 시작하라. 사용자가 앱 사용을 시작할 때 무엇을 하는지, 그리고 그 과정에서 즉시 UI가 어떤 기능을 하는지 생각하라. UI 기록 기능을 사용하면 일련의 사용자 작업을 정확성 및/또는 성능에 대한 테스트를 구현하기 위해 확장할 수 있는 일련의 사용자 작업을 UI 테스트 메서드로 캡처한다.  이 유형의 UI 테스트는 비교적 거친 집중력으로 시작하는 경향이 있으며 여러 서브시스템에 걸쳐 잘릴 수 있다. 처음에는 분석하기 어려운 많은 정보를 반환할 수 있다. UI 테스트 제품군과 함께 작업할 때 테스트 세부도를 세분화하고 UI 테스트에 초점을 맞춰 특정 서브시스템 동작을 보다 명확하게 반형할 수 있다.

